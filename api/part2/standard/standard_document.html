<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>OGC API - Connected Systems - Part 2</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="book">
<div id="header">
<h1>OGC API - Connected Systems - Part 2</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong class="big">Open Geospatial Consortium</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Submission Date: &lt;yyyy-mm-dd&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Approval Date:   &lt;yyyy-mm-dd&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Publication Date:   &lt;yyyy-mm-dd&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">External identifier of this OGC&#174; document: <a href="http://www.opengis.net/doc/IS/ogcapi-connectedsystems-2/0.1.0.draft" class="bare">http://www.opengis.net/doc/IS/ogcapi-connectedsystems-2/0.1.0.draft</a></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Internal reference number of this OGC&#174; document:    23-002</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Version: 0.1.0.draft</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Category: OGC&#174; Implementation Specification</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Editor:   Alex Robin</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong class="big">OGC API - Connected Systems - Part 2: Dynamic Data</strong></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Copyright notice</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Copyright &#169; 2022 Open Geospatial Consortium</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">To obtain additional rights of use, visit <a href="http://www.opengeospatial.org/legal/" class="bare">http://www.opengeospatial.org/legal/</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Warning</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This document is not an OGC Standard. This document is distributed for review and comment. This document is subject to change without notice and may not be referred to as an OGC Standard.</p>
</div>
<div class="paragraph">
<p>Recipients of this document are invited to submit, with their comments, notification of any relevant patent rights of which they are aware and to provide supporting documentation.</p>
</div>
<table class="tableblock frame-all grid-none" style="width: 50%;">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document type:   	OGC® Implementation Specification</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document stage:   	Draft</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document language: 	English</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>License Agreement</p>
</div>
<div class="paragraph">
<p><span class="small">Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual Property is furnished agrees to the terms of this Agreement.</span></p>
</div>
<div class="paragraph">
<p><span class="small">If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR.</span></p>
</div>
<div class="paragraph">
<p><span class="small">THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS THAT MAY BE IN FORCE ANYWHERE IN THE WORLD.</span></p>
</div>
<div class="paragraph">
<p><span class="small">THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY.</span></p>
</div>
<div class="paragraph">
<p><span class="small">This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as provided in the following sentence, no such termination of this license shall require the termination of any third party end-user sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual Property, or the operation of the Intellectual Property, infringe, or in LICENSOR&#8217;s sole opinion be likely to infringe, any patent, copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party.</span></p>
</div>
<div class="paragraph">
<p><span class="small">Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any LICENSOR standards or specifications. This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be construed to be a waiver of any rights or remedies available to it.</span></p>
</div>
<div style="page-break-after: always;"></div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_scope">1. Scope</a></li>
<li><a href="#_conformance">2. Conformance</a></li>
<li><a href="#_references">3. References</a></li>
<li><a href="#_terms_and_definitions">4. Terms and Definitions</a></li>
<li><a href="#_conventions">5. Conventions</a>
<ul class="sectlevel2">
<li><a href="#_identifiers">5.1. Identifiers</a></li>
</ul>
</li>
<li><a href="#_overview">6. Overview</a>
<ul class="sectlevel2">
<li><a href="#_general">6.1. General</a></li>
<li><a href="#_design_considerations">6.2. Design Considerations</a></li>
<li><a href="#_resource_types">6.3. Resource Types</a></li>
</ul>
</li>
<li><a href="#clause-api-common">7. Requirements Class "Common"</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">7.1. Overview</a></li>
<li><a href="#_links">7.2. Links</a></li>
<li><a href="#_resource_ids">7.3. Resource IDs</a></li>
<li><a href="#_paged_responses">7.4. Paged Responses</a></li>
</ul>
</li>
<li><a href="#clause-datastream-resources">8. Requirements Class "Datastreams &amp; Observations"</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">8.1. Overview</a></li>
<li><a href="#_datastream_resources">8.2. Datastream Resources</a>
<ul class="sectlevel3">
<li><a href="#_properties">8.2.1. Properties</a></li>
<li><a href="#_associations">8.2.2. Associations</a></li>
</ul>
</li>
<li><a href="#_datastream_collections">8.3. Datastream Collections</a></li>
<li><a href="#_observation_schema_resources">8.4. Observation Schema Resources</a></li>
<li><a href="#_observation_resources">8.5. Observation Resources</a>
<ul class="sectlevel3">
<li><a href="#_properties_2">8.5.1. Properties</a></li>
<li><a href="#_associations_2">8.5.2. Associations</a></li>
</ul>
</li>
<li><a href="#_observation_collections">8.6. Observation Collections</a></li>
<li><a href="#_basic_observation_filters">8.7. Basic Observation Filters</a>
<ul class="sectlevel3">
<li><a href="#_phenomenon_time_filter">8.7.1. Phenomenon Time Filter</a></li>
<li><a href="#_result_time_filter">8.7.2. Result Time Filter</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#clause-control-resources">9. Requirements Class "Control Streams &amp; Commands"</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">9.1. Overview</a></li>
<li><a href="#_controlstream_resources">9.2. ControlStream Resources</a>
<ul class="sectlevel3">
<li><a href="#_properties_3">9.2.1. Properties</a></li>
<li><a href="#_associations_3">9.2.2. Associations</a></li>
</ul>
</li>
<li><a href="#_controlstream_collections">9.3. ControlStream Collections</a></li>
<li><a href="#_command_schema_resources">9.4. Command Schema Resources</a></li>
<li><a href="#_command_resources">9.5. Command Resources</a>
<ul class="sectlevel3">
<li><a href="#_properties_4">9.5.1. Properties</a></li>
<li><a href="#_associations_4">9.5.2. Associations</a></li>
</ul>
</li>
<li><a href="#_command_collections">9.6. Command Collections</a></li>
<li><a href="#_command_status_resources">9.7. Command Status Resources</a>
<ul class="sectlevel3">
<li><a href="#_properties_5">9.7.1. Properties</a></li>
<li><a href="#_associations_5">9.7.2. Associations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#clause-system-events">10. Requirements Class "System Events"</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">10.1. Overview</a></li>
<li><a href="#_system_event_resources">10.2. System Event Resources</a>
<ul class="sectlevel3">
<li><a href="#_properties_6">10.2.1. Properties</a></li>
<li><a href="#_associations_6">10.2.2. Associations</a></li>
</ul>
</li>
<li><a href="#_system_events_collection">10.3. System Events Collection</a></li>
<li><a href="#_simple_queries">10.4. Simple Queries</a></li>
</ul>
</li>
<li><a href="#clause-system-history">11. Requirements Class "System History"</a>
<ul class="sectlevel2">
<li><a href="#_overview_6">11.1. Overview</a></li>
<li><a href="#_system_history_collection">11.2. System History Collection</a></li>
<li><a href="#_system_temporal_filtering">11.3. System Temporal Filtering</a></li>
</ul>
</li>
<li><a href="#clause-resource-events">12. Requirements Class "Resource Events"</a>
<ul class="sectlevel2">
<li><a href="#_overview_7">12.1. Overview</a></li>
</ul>
</li>
<li><a href="#clause-advanced-filtering">13. Requirements Class "Advanced Filtering"</a>
<ul class="sectlevel2">
<li><a href="#_overview_8">13.1. Overview</a></li>
</ul>
</li>
<li><a href="#clause-resource-crud">14. Requirements Class "Create, Replace, Update and Delete"</a>
<ul class="sectlevel2">
<li><a href="#_overview_9">14.1. Overview</a></li>
<li><a href="#_batch_mode">14.2. Batch Mode</a></li>
</ul>
</li>
<li><a href="#_requirements_classes_for_encodings">15. Requirements Classes for Encodings</a>
<ul class="sectlevel2">
<li><a href="#clause-encoding-json">15.1. Requirements Class "JSON Encoding"</a>
<ul class="sectlevel3">
<li><a href="#_overview_10">15.1.1. Overview</a></li>
<li><a href="#_media_type">15.1.2. Media Type</a></li>
<li><a href="#_datastream_encoding_rules">15.1.3. Datastream Encoding Rules</a></li>
<li><a href="#_datastream_schema_encoding_rules">15.1.4. Datastream Schema Encoding Rules</a></li>
<li><a href="#_observation_encoding_rules">15.1.5. Observation Encoding Rules</a></li>
<li><a href="#_control_stream_encoding_rules">15.1.6. Control Stream Encoding Rules</a></li>
<li><a href="#_command_encoding_rules">15.1.7. Command Encoding Rules</a></li>
<li><a href="#_command_status_encoding_rules">15.1.8. Command Status Encoding Rules</a></li>
<li><a href="#_resource_event_encoding_rules">15.1.9. Resource Event Encoding Rules</a></li>
<li><a href="#_system_event_encoding_rules">15.1.10. System Event Encoding Rules</a></li>
</ul>
</li>
<li><a href="#clause-encoding-swejson">15.2. Requirements Class "SWE Common JSON Encoding"</a>
<ul class="sectlevel3">
<li><a href="#_overview_11">15.2.1. Overview</a></li>
<li><a href="#_media_type_2">15.2.2. Media Type</a></li>
</ul>
</li>
<li><a href="#clause-encoding-swetext">15.3. Requirements Class "SWE Common Text Encoding"</a>
<ul class="sectlevel3">
<li><a href="#_overview_12">15.3.1. Overview</a></li>
<li><a href="#_media_type_3">15.3.2. Media Type</a></li>
</ul>
</li>
<li><a href="#clause-encoding-swebinary">15.4. Requirements Class "SWE Common Binary Encoding"</a>
<ul class="sectlevel3">
<li><a href="#_overview_13">15.4.1. Overview</a></li>
<li><a href="#_media_type_4">15.4.2. Media Type</a></li>
<li><a href="#_encoding_rules">15.4.3. Encoding Rules</a></li>
<li><a href="#_datastream_schema">15.4.4. Datastream Schema</a></li>
<li><a href="#_control_channel_schema">15.4.5. Control Channel Schema</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_requirements_classes_for_transport_protocols">16. Requirements Classes for Transport Protocols</a>
<ul class="sectlevel2">
<li><a href="#clause-protocol-websocket">16.1. Requirements Class "Websocket Transport"</a>
<ul class="sectlevel3">
<li><a href="#_overview_14">16.1.1. Overview</a></li>
</ul>
</li>
<li><a href="#clause-protocol-mqtt">16.2. Requirements Class "MQTT Transport"</a>
<ul class="sectlevel3">
<li><a href="#_overview_15">16.2.1. Overview</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_requirements_detail">Annex A: Requirements Detail</a>
<ul class="sectlevel2">
<li><a href="#_conformance_class_a">A.1. Conformance Class A</a>
<ul class="sectlevel3">
<li><a href="#_requirement_1">A.1.1. Requirement 1</a></li>
<li><a href="#_requirement_2">A.1.2. Requirement 2</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_abstract_test_suite_normative">Annex B: Abstract Test Suite (Normative)</a></li>
<li><a href="#_examples_informative">Annex C: Examples (Informative)</a></li>
<li><a href="#_relationship_with_other_ogciso_standards_informative">Annex D: Relationship with other OGC/ISO standards (Informative)</a>
<ul class="sectlevel2">
<li><a href="#_semantic_sensor_network_ontology">D.1. Semantic Sensor Network Ontology</a></li>
<li><a href="#_sensor_modeling_language">D.2. Sensor Modeling Language</a></li>
<li><a href="#_observations_measurements">D.3. Observations &amp; Measurements</a></li>
<li><a href="#_coverages">D.4. Coverages</a></li>
<li><a href="#_ogc_api_features">D.5. OGC API - Features</a></li>
<li><a href="#_sensorthings_api">D.6. SensorThings API</a></li>
<li><a href="#_other_ogc_apis">D.7. Other OGC APIs</a></li>
</ul>
</li>
<li><a href="#_revision_history">Annex E: Revision History</a></li>
<li><a href="#Bibliography">Annex F: Bibliography</a></li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong class="big">i.     Abstract</strong></p>
</div>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
<div class="paragraph">
<p><strong class="big">ii.    Keywords</strong></p>
</div>
<div class="paragraph">
<p>The following are keywords to be used by search engines and document catalogues.</p>
</div>
<div class="paragraph">
<p>ogcdoc, OGC document, OpenAPI, REST, feature, API, connected system, IoT, sensorweb, ssn, sensor, actuator, transducer, platform, observation, measurement, datastream, command, control, trajectory, dynamic</p>
</div>
<div class="paragraph">
<p><strong class="big">iii.   Preface</strong></p>
</div>
<div class="paragraph">
<p><strong>OGC Declaration</strong></p>
</div>
<div class="paragraph">
<p>Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights.
The Open Geospatial Consortium shall not be held responsible for identifying any or all such patent rights.</p>
</div>
<div class="paragraph">
<p>Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims
or other intellectual property rights of which they may be aware that might be infringed by any implementation of
the standard set forth in this document, and to provide supporting documentation.</p>
</div>
<div class="paragraph">
<p><strong class="big">iv.    Submitting organizations</strong></p>
</div>
<div class="paragraph">
<p>The following organizations submitted this Document to the Open Geospatial Consortium (OGC):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GeoRobotix, Inc.</p>
</li>
<li>
<p>Botts Innovative Research, Inc.</p>
</li>
<li>
<p>National Aeronautics and Space Administration (NASA)</p>
</li>
<li>
<p>Pelagis Data Solutions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong class="big">v.     Submitters</strong></p>
</div>
<div class="paragraph">
<p>All questions regarding this submission should be directed to the editor or the submitters:</p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Organization</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alex Robin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoRobotix</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mike Botts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Botts Innovative Research</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chris Dillard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Botts Innovative Research</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nick Garay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Botts Innovative Research</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Don Sullivan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NASA Ames Research Center</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Glenn Laughlin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pelagis Data Solutions</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_scope"><a class="anchor" href="#_scope"></a>1. Scope</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This standard defines extensions to <a href="https://ogcapi.ogc.org/features">OGC API - Features</a> for exposing dynamic data flowing to and from observing systems and platforms. This standard also complies with <a href="https://ogcapi.ogc.org/common">OGC API - Common</a>.</p>
</div>
<div class="paragraph">
<p>The API provides an actionnable implementation of concepts defined in the <a href="https://www.w3.org/TR/vocab-ssn/">Semantic Sensor Network Ontology (SSN)</a>.</p>
</div>
<div class="paragraph">
<p>More specifically, Part 2 of the API implements additional SSN concepts (namely Observation, Actuation, Result and Sample).</p>
</div>
<div class="paragraph">
<p>The following types of resources are made availables through this API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Datastream</code></p>
</li>
<li>
<p><code>Observation</code></p>
</li>
<li>
<p><code>Control Stream</code></p>
</li>
<li>
<p><code>Command</code></p>
</li>
<li>
<p><code>Command Status</code></p>
</li>
<li>
<p><code>System Event</code></p>
</li>
<li>
<p><code>Resource Events</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conformance"><a class="anchor" href="#_conformance"></a>2. Conformance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Standard defines XXXX.</p>
</div>
<div class="paragraph">
<p>Requirements for N standardization target types are considered:
* AAAA
* BBBB</p>
</div>
<div class="paragraph">
<p>Conformance with this Standard shall be checked using all the relevant tests specified in Annex A (normative) of this document.
The framework, concepts, and methodology for testing, and the criteria to be achieved to claim conformance are specified in the
OGC Compliance Testing Policies and Procedures and the OGC Compliance Testing web site.</p>
</div>
<div class="paragraph">
<p>In order to conform to this OGC® Standard, a software implementation shall choose to implement:
* Any one of the conformance levels specified in Annex A (normative).
* Any one of the Distributed Computing Platform profiles specified in Annexes TBD through TBD (normative).</p>
</div>
<div class="paragraph">
<p>All requirements-classes and conformance-classes described in this document are owned by the Standard(s) identified.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>3. References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following normative documents contain provisions that, through reference in this text, constitute provisions of this document.
For dated references, subsequent amendments to, or revisions of, any of these publications do not apply. For undated references,
the latest edition of the normative document referred to applies.</p>
</div>
<div id="OGC-API-CONSYS-1" class="ulist">
<ul>
<li>
<p>OGC: OGC 23-000, OGC API - Connected Systems - Part 1: Feature Resources, version 1.0, <a href="https://docs.ogc.org/DRAFTS/23-001.html" class="bare">https://docs.ogc.org/DRAFTS/23-001.html</a></p>
</li>
</ul>
</div>
<div id="OGC-API-COMMON-2" class="ulist">
<ul>
<li>
<p>OGC: OGC  20-024, OGC API - Common - Part 2: Geospatial Data, version 1.0, <a href="https://docs.ogc.org/DRAFTS/20-024.html" class="bare">https://docs.ogc.org/DRAFTS/20-024.html</a></p>
</li>
</ul>
</div>
<div id="SSN" class="ulist">
<ul>
<li>
<p>OGC: OGC/W3C Semantic Sensor Network Ontology, (October 19 2017), <a href="https://www.w3.org/TR/vocab-ssn" class="bare">https://www.w3.org/TR/vocab-ssn</a></p>
</li>
</ul>
</div>
<div id="OM" class="ulist">
<ul>
<li>
<p>OGC: OGC 10-004r3, Topic 20: Observations and Measurements, version 2.0</p>
</li>
</ul>
</div>
<div id="SensorML" class="ulist">
<ul>
<li>
<p>OGC: OGC 12-000r2, OGC SensorML: Model and XML Encoding Standard, version 2.1</p>
</li>
</ul>
</div>
<div id="SWECommon" class="ulist">
<ul>
<li>
<p>OGC: OGC 08-094r1, OGC SWE Common Data Model Encoding Standard, version 2.0</p>
</li>
</ul>
</div>
<div id="SWECommon-JSON" class="ulist">
<ul>
<li>
<p>OGC: OGC 23-003, OGC SWE Common Data Model: JSON Encoding Standard, version 1.0, <a href="https://docs.ogc.org/DRAFTS/23-003.html" class="bare">https://docs.ogc.org/DRAFTS/23-003.html</a></p>
</li>
</ul>
</div>
<div id="Websocket" class="ulist">
<ul>
<li>
<p>IETF: RFC 6455: The WebSocket Protocol, December 2011, Proposed Standard, <a href="https://www.rfc-editor.org/rfc/rfc6455" class="bare">https://www.rfc-editor.org/rfc/rfc6455</a></p>
</li>
</ul>
</div>
<div id="MQTT" class="ulist">
<ul>
<li>
<p>OASIS: MQTT Version 5.0, 07 March 2019, OASIS Standard, <a href="http://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html" class="bare">http://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terms_and_definitions"><a class="anchor" href="#_terms_and_definitions"></a>4. Terms and Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document used the terms defined in <a href="https://portal.ogc.org/public_ogc/directives/directives.php">OGC Policy Directive 49</a>,
which is based on the ISO/IEC Directives, Part 2, Rules for the structure and drafting of International Standards.
In particular, the word “shall” (not “must”) is the verb form used to indicate a requirement to be strictly followed
to conform to this standard and OGC documents do not use the equivalent phrases in the ISO/IEC Directives, Part 2.</p>
</div>
<div class="paragraph">
<p>This document also uses terms defined in the OGC Standard for Modular specifications
(<a href="https://portal.opengeospatial.org/files/?artifact_id=34762">OGC 08-131r3</a>), also known as the 'ModSpec'.
The definitions of terms such as standard, specification, requirement, and conformance test are provided in the ModSpec.</p>
</div>
<div class="paragraph">
<p>For the purposes of this document, the following additional terms and definitions apply.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Command</dt>
<dd>
<p><mark>TODO</mark></p>
</dd>
<dt class="hdlist1">Observation</dt>
<dd>
<p><mark>TODO</mark></p>
</dd>
<dt class="hdlist1">Property</dt>
<dd>
<p>facet or attribute of an object referenced by a name<br>
 [source: ISO 19143]</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conventions"><a class="anchor" href="#_conventions"></a>5. Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides details and examples for any conventions used in the document. Examples of conventions are symbols, abbreviations, use of XML schema, or special notes regarding how to read the document.</p>
</div>
<div class="sect2">
<h3 id="_identifiers"><a class="anchor" href="#_identifiers"></a>5.1. Identifiers</h3>
<div class="paragraph">
<p>The normative provisions in this Standard are denoted by the URI</p>
</div>
<div class="paragraph">
<p><a href="http://www.opengis.net/spec/ogcapi-movingfeatures-1/1.0" class="bare">http://www.opengis.net/spec/ogcapi-movingfeatures-1/1.0</a></p>
</div>
<div class="paragraph">
<p>All requirements and conformance tests that appear in this document are denoted by partial URIs which are relative to this base.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>6. Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_general"><a class="anchor" href="#_general"></a>6.1. General</h3>
<div class="paragraph">
<p>All resources defined in Part 1 of this Standard are feature resources, among which the <code>System</code> resource. Part 2 (this document) defines additional resource types to describe and interact with the dynamic data that flows in and out of these systems.</p>
</div>
<div class="paragraph">
<p>Part 2 of this Standard defines resource types that allow the provision of dynamic data about all kinds of devices, hardware components or processes that can transmit and/or receive data via communication networks (a.k.a. connected systems), including sensors, platforms, robots, human observers, forecast models, computer simulations, etc.</p>
</div>
<div class="paragraph">
<p>Flows carrying observation and status data coming out of a system are called <code>Datastreams</code> while flows carrying commands sent to a system are called <code>Control Streams</code> (note that the direction of the flow mentionned here is relative to the real system, which is different from the direction of the data flows going in and out of the API server).</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_considerations"><a class="anchor" href="#_design_considerations"></a>6.2. Design Considerations</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
</div>
<div class="sect2">
<h3 id="_resource_types"><a class="anchor" href="#_resource_types"></a>6.3. Resource Types</h3>
<div class="paragraph">
<p>As indicated above, while part 1 of this Standard focused on defining "static" feature types, part 2 defines additional resources to deal with dynamic data associated to these features.</p>
</div>
<div class="paragraph">
<p><a href="#api-class-diagram">Figure 1</a> shows a UML class diagram of all Connected Systems API resources. Resources defined in part 2 are shown with a solid border while resources that were already defined in part 1 are shown with a dashed light gray outline.</p>
</div>
<div id="api-class-diagram" class="imageblock text-center">
<div class="content">
<img src="figures/FIG001-resource-diagram.png" alt="api-class-diagram">
</div>
<div class="title">Figure 1. Class diagram of API resources</div>
</div>
<div class="paragraph">
<p>The table below provides a short summary description of these resource types:</p>
</div>
<table id="feature-types" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 1. Overview of resource types defined by this Standard</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 42.8571%;">
<col style="width: 28.5714%;">
<col style="width: 14.2858%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Resource Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Requirements Class</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Possible Encodings</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Datastream</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of datastreams, including
                       observed properties and features of interest.</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Observation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actual observations, including the result data.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON,<br>
                                                                                                                SWE-JSON, SWE-Text, SWE-Binary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control Stream</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of control channels, including
                       controllable properties and features of interest.</p></td>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock"><a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actual command messages, including the command
                       parameters data.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON,<br>
                                                                                                                SWE-JSON, SWE-Text, SWE-Binary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status info about a given command.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">System Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System events are generated when a system is under
                       maintenance or moved.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-system-events">Requirements Class "System Events"</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SML-JSON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource Event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource events are generated when resources are
                       created, updated or deleted.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-resource-events">Requirements Class "Resource Events"</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The encodings listed in the table are the ones defined in this Standard document but extensions can define additional encodings.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clause-api-common"><a class="anchor" href="#clause-api-common"></a>7. Requirements Class "Common"</h2>
<div class="sectionbody">
<table id="rc_api-common" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/api-common" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/api-common</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/limit" class="bare">http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/limit</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-encoding-json">Requirements Class "JSON Encoding"</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>7.1. Overview</h3>
<div class="paragraph">
<p>All resource types defined in this Standard must comply with a common set of rules, many of which are inherited from <a href="https://ogcapi.ogc.org/common">OGC API - Common</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_links"><a class="anchor" href="#_links"></a>7.2. Links</h3>
<div class="paragraph">
<p>Since resources defined by this Standard can be accessed through multiple collections, any direct link to a resource (referenced by ID) must use its canonical URL.</p>
</div>
<div class="paragraph">
<p>The canonical URL for a resource is the one that accesses it through the catch-all collection of the corresponding resource type. These collections are rooted at the following URLs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{api_root}/datastreams</code></p>
</li>
<li>
<p><code>{api_root}/observations</code></p>
</li>
<li>
<p><code>{api_root}/controls</code></p>
</li>
<li>
<p><code>{api_root}/commands</code></p>
</li>
<li>
<p><code>{api_root}/system-events</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This leads to the following canonical URL templates for individual resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{api_root}/datastreams/{dsId}</code></p>
</li>
<li>
<p><code>{api_root}/observations/{obsId}</code></p>
</li>
<li>
<p><code>{api_root}/controls/{csId}</code></p>
</li>
<li>
<p><code>{api_root}/commands/{cmdId}</code></p>
</li>
<li>
<p><code>{api_root}/system-events/{evtId}</code></p>
</li>
</ul>
</div>
<table id="req_links-canonical" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 1</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/links/canonical</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>All links to resources corresponding to instances of a resource type defined by this Standard SHALL use the resource&#8217;s canonical URL.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_resource_ids"><a class="anchor" href="#_resource_ids"></a>7.3. Resource IDs</h3>
<div class="paragraph">
<p>Resource IDs are typically generated by the server and are not guaranteed to be globally unique.
However, the server must ensure that IDs are unique within a given resource type.</p>
</div>
<table id="req_resource-id-unique" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 2</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/unique-ids</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL ensure that resource IDs are unique across all collections of a given resource type.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_paged_responses"><a class="anchor" href="#_paged_responses"></a>7.4. Paged Responses</h3>
<div class="paragraph">
<p>All collections of resource types defined in this Standard support paging.</p>
</div>
<table id="req_resource-col-paging" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 3</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/unique-ids</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL support paging on all collections containing resource types defined in this Standard using the <code>limit</code> query parameter and the <code>next</code> link, as specified by <a href="#OGC-API-COMMON-2">OGC API - Common - Part 2</a> Requirements Module <a href="http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/limit" class="bare">http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/limit</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clause-datastream-resources"><a class="anchor" href="#clause-datastream-resources"></a>8. Requirements Class "Datastreams &amp; Observations"</h2>
<div class="sectionbody">
<table id="rc_datastream-resources" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/datastream-resources" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/datastream-resources</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-api-common">Requirements Class "Common"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-features" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-features</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="#_overview_3"></a>8.1. Overview</h3>
<div class="paragraph">
<p>This requirements class specifies how <code>DataStream</code> and <code>Observation</code> resource descriptions are provided using this API.</p>
</div>
<div class="paragraph">
<p>The <code>DataStream</code> resource represents a dataset that is produced by an (observation) system, that is itself represented by a <code>System</code> feature in the API.</p>
</div>
<div class="paragraph">
<p>A <code>DataStream</code> represents the real-time data stream coming out of the system as well as the historical data accumulated from such stream. It can be used to provide access to real-time data only, archived data only, or both. The time periods that are part of the <code>Datastream</code> resource description are used to disambiguate between these cases.</p>
</div>
<div class="paragraph">
<p>A <code>DataStream</code> also implements an <em><a href="https://www.w3.org/TR/vocab-ssn-ext/#observation-collection">homogeneous collection of observations</a></em> as defined in <a href="#OGC-W3C-SSN-EXT">Extensions to the SSN Ontology</a>. Consequently, <code>Observation</code> resources are available through a sub-collection of a <code>DataStream</code> resource.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The exact way properties and associations of the resources defined in this section are represented in the payload is defined by each encoding. See section <a href="#clause-encoding-json">Requirements Class "JSON Encoding"</a> for example representations of these resources.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_datastream_resources"><a class="anchor" href="#_datastream_resources"></a>8.2. Datastream Resources</h3>
<div class="paragraph">
<p>This section defines the properties and associations (links to other resources) that apply to <code>DataStream</code> resources.</p>
</div>
<div class="paragraph">
<p>Below is the contextual class diagram of the <code>DataStream</code> resource:</p>
</div>
<div id="datastream-class" class="imageblock text-center">
<div class="content">
<img src="figures/FIG002-datastream-class.png" alt="api-class-diagram">
</div>
<div class="title">Figure 2. DataStream Resource Diagram</div>
</div>
<div class="sect3">
<h4 id="_properties"><a class="anchor" href="#_properties"></a>8.2.1. Properties</h4>
<table id="req_datastream-props" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 4</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/datastream/properties</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>DataStream</code> resource SHALL include all mandatory properties listed in <a href="#datastream-properties">Table 2</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="datastream-properties" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Datastream Properties</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 50%;">
<col style="width: 15%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Data Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The human readable name of the datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human readable description for the datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of datastream (see <a href="#datastream-types">Table 3</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The validity period of the datastream&#8217;s description.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeExtent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phenomenonTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time period spanned by the phenomenon times of all observations in this datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeExtent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resultTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time period spanned by the result times of all observations in this datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeExtent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>observedProperties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Properties for which the observations in this datastream provide measurements.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List&lt;URI&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>formats</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of formats that the observations in this datastream can be encoded to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List&lt;String&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
</tbody>
</table>
<table id="req_datastream-type" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 5</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/datastream/type</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>DataStream</code> resource encoding SHALL use one of the URIs provided in <a href="#datastream-types">Table 3</a> as the value of the <code>Type</code> property.
       If using a URI is not practical, the encoding SHALL define a mapping between all possible values used to encode the type and the URIs defined in this table.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="datastream-types" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Datastream Types</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For datastreams providing status observations of the parent system itself or one of its subsystems.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ExternalFOI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For datastreams providing observations of other features of interest.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_associations"><a class="anchor" href="#_associations"></a>8.2.2. Associations</h4>
<div class="paragraph">
<p>A <code>DataStream</code> resource is also required to include the following associations:</p>
</div>
<table id="req_datastream-links" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 6</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/datastream/links</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>DataStream</code> resource SHALL include the associations defined in <a href="#datastream-links">Table 4</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="datastream-links" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Datastream Associations</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Relation Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Target Content</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>system</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>System</code> that outputs this datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single <code>System</code> resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>observations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>Observations</code> that are part of this datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of <code>Observation</code> resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>samplingFeatures</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>Sampling Features</code> that are the subject of observations in this datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of <code>SamplingFeature</code> resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ultimateFeaturesOfInterest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the ultimate features of interest that are the subject of observations in this datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of <code>Feature</code> resources.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_datastream_collections"><a class="anchor" href="#_datastream_collections"></a>8.3. Datastream Collections</h3>
<div class="paragraph">
<p>Top level <code>Datastream</code> resource collections are identified with the item-type <code>'datastream'</code>.</p>
</div>
<table id="req_datastream-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 7</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/datastream/collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose at least one collection containing <code>Datastream</code> resources.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_datastream-collection-type" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 8</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/datastream/collection-type</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL identify all collections containing <code>DataStream</code> resources by setting the value of the <code>itemType</code> property to <code>'datastream'</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_datastream-catchall-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 9</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/datastream/catchall-collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose a collection containing all available <code>DataStream</code> resources at URL <code>{api_root}/datastreams</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_datastream-system-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 10</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/datastream/system-collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose the collection of all <code>DataStream</code> resources associated to a given <code>System</code> at URL <code>{systemResourceUrl}/datastreams</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_observation_schema_resources"><a class="anchor" href="#_observation_schema_resources"></a>8.4. Observation Schema Resources</h3>
<div class="paragraph">
<p>Multiple observation formats can be offered for any given datastream. This API provides a way for the server to communicate the schema (<em>not necessarily a JSON schema</em>) corresponding to each observation format.</p>
</div>
<div class="paragraph">
<p>Note that, even for standard media types such as O&amp;M JSON, a different schema is needed for each individual datastream because the exact content of the observations <code>result</code> property changes according to the properties being observed.</p>
</div>
<table id="req_datastream-schemas" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 11</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/datastream/schema</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose the schemas for a given <code>DataStream</code> at URL <code>{datastreamResourceUrl}/schema</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL return a single schema corresponding to the format identified by the mandatory <code>obsFormat</code> query parameter.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title">Example 1. Example</div>
<div class="content">
<div class="paragraph">
<p>If a datastream reports the following supported observation formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
<li>
<p><code>application/swe+csv</code></p>
</li>
<li>
<p><code>application/swe+binary</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The schema for each of these formats is obtained with the following requests, respectively:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>https://{api_root}/datastreams/{id}/schema?obsFormat=application/json</code></p>
</li>
<li>
<p><code>https://{api_root}/datastreams/{id}/schema?obsFormat=application/swe%2Bcsv</code></p>
</li>
<li>
<p><code>https://{api_root}/datastreams/{id}/schema?obsFormat=application/swe%2Bbinary</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the media type in the request has to be properly URL encoded, leading to the <code>%2B</code> in place of the <code>+</code> character.</p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The exact content of a schema resource is defined by each encoding. See section <a href="#clause-encoding-json">Requirements Class "JSON Encoding"</a> for example schemas used for observations encoded using the default JSON format.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_observation_resources"><a class="anchor" href="#_observation_resources"></a>8.5. Observation Resources</h3>
<div class="paragraph">
<p><code>Observation</code> resources are modeled on the corresponding <em><a href="http://www.w3.org/ns/sosa/Observation">Observation</a></em> concept defined in the <a href="#OGC-W3C-SSN">SSN Ontology</a>.</p>
</div>
<div class="paragraph">
<p>However, since <code>Observation</code> resources exposed through the API are always part of a <code>Datastream</code> (e.g. a type of <a href="https://www.w3.org/TR/vocab-ssn-ext/#sosa:ObservationCollection"><em>ObservationCollection</em></a>), they don&#8217;t have to include all mandatory properties as most of them can be factored at the datastream level.</p>
</div>
<div class="paragraph">
<p>Thus, an <code>Observation</code> resource is not directly associated to a <code>Sensor</code> and a <code>Procedure</code>. Instead, it is the <code>Datastream</code> that the observation is part of, that is attached to a parent <code>System</code>. And it is the <code>System</code> that is, in turn, associated to the <code>Procedure</code> that it implements.</p>
</div>
<div class="paragraph">
<p>In addition, <code>Observation</code> resources are not restricted to a single observed property. It is thus possible to package the observation result of several properties in a single resource.</p>
</div>
<div class="paragraph">
<p>Below is the contextual class diagram of the <code>Observation</code> resource:</p>
</div>
<div id="observation-class" class="imageblock text-center">
<div class="content">
<img src="figures/FIG003-observation-class.png" alt="api-class-diagram">
</div>
<div class="title">Figure 3. Observation Resource Diagram</div>
</div>
<div class="sect3">
<h4 id="_properties_2"><a class="anchor" href="#_properties_2"></a>8.5.1. Properties</h4>
<table id="req_observation-props" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 12</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/observation/properties</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An <code>Observation</code> resource SHALL include all mandatory properties listed in <a href="#observation-properties">Table 5</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="observation-properties" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Observation Properties</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 50%;">
<col style="width: 15%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Data Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>phenomenonTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time the measured property value applies to the feature of interest.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resultTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time the result value was obtained.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parameters</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Observation parameters, providing information about how the procedure was used to produce this specific observation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Observation result, carrying the estimated values of the observed properties.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>phenomenonTime</code> can be in the past (e.g. geological or deep space observations) or future (e.g. weather forecast). However, the <code>resultTime</code> can never be in the future.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_associations_2"><a class="anchor" href="#_associations_2"></a>8.5.2. Associations</h4>
<div class="paragraph">
<p>An <code>Observation</code> resource is also required to include the following associations:</p>
</div>
<table id="req_observation-links" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 13</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/observation/links</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>Command</code> resource SHALL include the associations defined in <a href="#observation-links">Table 6</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="observation-links" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Observation Associations</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Relation Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Target Content</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>datastream</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>DataStream</code> that the observation is part of.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single <code>DataStream</code> resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>featureOfInterest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the feature of interest that is the subject of the observation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single <code>SamplingFeature</code> resource.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_observation_collections"><a class="anchor" href="#_observation_collections"></a>8.6. Observation Collections</h3>
<div class="paragraph">
<p>Top level <code>Observation</code> resource collections are identified with the item-type <code>'observation'</code>.</p>
</div>
<table id="req_observation-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 14</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/observation/collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose at least one collection containing <code>Observation</code> resources.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_observation-collection-type" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 15</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/observation/collection-type</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL identify all collections containing <code>Observation</code> resources by setting the value of the <code>itemType</code> property to <code>'observation'</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_observation-catchall-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 16</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/observation/catchall-collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose a collection containing all available <code>Observation</code> resources at URL <code>{api_root}/observations</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition to top-level collections, each datastream exposes its own observations as a sub-collection of the <code>DataStream</code> resource.</p>
</div>
<table id="req_observation-datastream-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 17</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/observation/datastream-collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose a collection containing all <code>Observation</code> resources available from a given <code>Datastream</code> at URL <code>{datastreamResourceUrl}/observations</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_basic_observation_filters"><a class="anchor" href="#_basic_observation_filters"></a>8.7. Basic Observation Filters</h3>
<div class="paragraph">
<p>All observation collections support filtering using the query parameters described below.</p>
</div>
<div class="sect3">
<h4 id="_phenomenon_time_filter"><a class="anchor" href="#_phenomenon_time_filter"></a>8.7.1. Phenomenon Time Filter</h4>

</div>
<div class="sect3">
<h4 id="_result_time_filter"><a class="anchor" href="#_result_time_filter"></a>8.7.2. Result Time Filter</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clause-control-resources"><a class="anchor" href="#clause-control-resources"></a>9. Requirements Class "Control Streams &amp; Commands"</h2>
<div class="sectionbody">
<table id="rc_control-resources" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/control-resources" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/control-resources</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-api-common">Requirements Class "Common"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-features" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-features</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="#_overview_4"></a>9.1. Overview</h3>
<div class="paragraph">
<p>This requirements class specifies how <code>ControlStream</code>, <code>Command</code>, and <code>CommandStatus</code> resource descriptions are provided using this API.</p>
</div>
<div class="paragraph">
<p>The <code>ControlStream</code> resource represents a control channel that is used to change the value of certain controllable properties of a feature of interest (which can be a <code>System</code>).</p>
</div>
<div class="paragraph">
<p>A <code>ControlStream</code> represents the real-time stream of command messages sent to the system, as well as all historical commands received through the channel. It can be used to provide access to real-time commands only, archived commands only, or both. The time periods that are part of the <code>ControlStream</code> resource description are used to disambiguate between these cases.</p>
</div>
<div class="paragraph">
<p><code>Command</code> resources are available through a sub-collection of a <code>ControlStream</code> resource, and each command can lead to the creation of one or more status reports (i.e. <code>CommandStatus</code> resources).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The exact way properties and associations of the resources defined in this section are represented in the payload is defined by each encoding. See section <a href="#clause-encoding-json">Requirements Class "JSON Encoding"</a> for example representations of these resources.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_controlstream_resources"><a class="anchor" href="#_controlstream_resources"></a>9.2. ControlStream Resources</h3>
<div class="paragraph">
<p>This section defines the properties and associations (links to other resources) that apply to <code>ControlStream</code> resources.</p>
</div>
<div class="paragraph">
<p>Below is the contextual class diagram of the <code>ControlStream</code> resource:</p>
</div>
<div id="datastream-class" class="imageblock text-center">
<div class="content">
<img src="figures/FIG004-controlstream-class.png" alt="api-class-diagram">
</div>
<div class="title">Figure 4. ControlStream Resource Diagram</div>
</div>
<div class="sect3">
<h4 id="_properties_3"><a class="anchor" href="#_properties_3"></a>9.2.1. Properties</h4>
<table id="req_controlstream-props" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 18</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/controlstream/properties</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>ControlStream</code> resource SHALL include all mandatory properties listed in <a href="#controlstream-properties">Table 7</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="controlstream-properties" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Control Stream Properties</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 50%;">
<col style="width: 15%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Data Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The human readable name of the control stream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human readable description for the control stream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of control stream (see <a href="#controlstream-types">Table 8</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>validTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The validity period of the control stream&#8217;s description.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeExtent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>issueTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time period spanned by the issue times of all commands in this datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeExtent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>executionTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time period spanned by the execution times of all commands in this datastream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeExtent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controlledProperties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Properties whose value can be changed by commands in this control stream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List&lt;URI&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>formats</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of formats that the commands in this control stream can be encoded to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List&lt;String&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
</tbody>
</table>
<table id="req_controlstream-type" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 19</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/controlstream/type</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>ControlStream</code> resource encoding SHALL use one of the URIs provided in <a href="#controlstream-types">Table 8</a> as the value of the <code>Type</code> property.<br>
       If using a URI is not practical, the encoding SHALL define a mapping between all possible values used to encode the type and the URIs defined in this table.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="controlstream-types" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Control Stream Types</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For control streams targeting the parent system itself or one of its subsystems.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ExternalFOI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For control streams targeting external features of interest.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_associations_3"><a class="anchor" href="#_associations_3"></a>9.2.2. Associations</h4>
<div class="paragraph">
<p>A <code>ControlStream</code> resource is also required to include the following associations:</p>
</div>
<table id="req_controlstream-links" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 20</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/controlstream/links</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>ControlStream</code> resource SHALL include the associations defined in <a href="#controlstream-links">Table 9</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="controlstream-links" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Control Stream Associations</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Relation Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Target Content</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>system</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>System</code> that received commands from this <code>ControlStream</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single <code>System</code> resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commands</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>Commands</code> that were sent to this control channel.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of <code>Command</code> resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>samplingFeatures</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>Sampling Features</code> that are the target of commands in this control stream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of <code>SamplingFeature</code> resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ultimateFeaturesOfInterest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the ultimate features of interest that are the target of commands in this control stream.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of <code>Feature</code> resources.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The term <code>sampling feature</code> is used here to identify the proxy feature that is used to describe where the effector interacts with the feature of interest (e.g. the vent of an A/C system, the part of a larger system, etc.).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_controlstream_collections"><a class="anchor" href="#_controlstream_collections"></a>9.3. ControlStream Collections</h3>
<div class="paragraph">
<p>Top level <code>ControlStream</code> resource collections are identified with the item-type <code>'controlstream'</code>.</p>
</div>
<table id="req_controlstream-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 21</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/controlstream/collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose at least one collection containing <code>ControlStream</code> resources.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_controlstream-collection-type" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 22</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/controlstream/collection-type</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL identify all collections containing <code>ControlStream</code> resources by setting the value of the <code>itemType</code> property to <code>'controlstream'</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_controlstream-catchall-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 23</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/controlstream/catchall-collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose a collection containing all available <code>ControlStream</code> resources at URL <code>{api_root}/controls</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition to top-level collections, each system exposes its own control streams as a sub-collection.</p>
</div>
<table id="req_controlstream-system-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 24</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/controlstream/system-collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose the collection of all <code>ControlStream</code> resources associated to a given <code>System</code> at URL <code>{systemResourceUrl}/controls</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_command_schema_resources"><a class="anchor" href="#_command_schema_resources"></a>9.4. Command Schema Resources</h3>
<div class="paragraph">
<p>Multiple command formats can be offered for any given control stream. This API provides a way for the server to communicate the schema (<em>not necessarily a JSON schema</em>) corresponding to each command format.</p>
</div>
<div class="paragraph">
<p>Note that a different schema is needed for each individual control stream because the exact content of the command <code>parameters</code> property changes according to the properties being controlled.</p>
</div>
<table id="req_controlstream-schemas" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 25</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/controlstream/schema</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose the schemas for a given <code>ControlStream</code> at URL <code>{controlStreamResourceUrl}/schema</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL return a single schema corresponding to the format identified by the mandatory <code>cmdFormat</code> query parameter.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title">Example 2. Example</div>
<div class="content">
<div class="paragraph">
<p>If a control stream reports the following supported command formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application/json</code></p>
</li>
<li>
<p><code>application/swe+csv</code></p>
</li>
<li>
<p><code>application/swe+binary</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The schema for each of these formats is obtained with the following requests, respectively:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>https://{api_root}/controls/{id}/schema?cmdFormat=application/json</code></p>
</li>
<li>
<p><code>https://{api_root}/controls/{id}/schema?cmdFormat=application/swe%2Bcsv</code></p>
</li>
<li>
<p><code>https://{api_root}/controls/{id}/schema?cmdFormat=application/swe%2Bbinary</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the media type in the request has to be properly URL encoded.</p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The exact content of a schema resource is defined by each encoding. See section <a href="#clause-encoding-json">Requirements Class "JSON Encoding"</a> for example schemas used for commands encoded using the default JSON format.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_command_resources"><a class="anchor" href="#_command_resources"></a>9.5. Command Resources</h3>
<div class="paragraph">
<p><code>Command</code> resources are a generalization of the <em><a href="http://www.w3.org/ns/sosa/Actuation">Actuation</a></em> concept defined in the <a href="#OGC-W3C-SSN">SSN Ontology</a>.</p>
</div>
<div class="paragraph">
<p><code>Command</code> resources exposed through the API are always part of a <code>CommandStream</code>, thus they don&#8217;t have to include all properties of an <em>Actuation</em> as many of them can be factored at the command stream level.</p>
</div>
<div class="paragraph">
<p>Thus, a <code>Command</code> resource is not directly associated to an <code>Actuator</code> and a <code>Procedure</code>. Instead, it is the <code>CommandStream</code> that the command is part of, that is attached to a parent <code>System</code>. And it is the <code>System</code> that is, in turn, associated to the <code>Procedure</code> that it implements.</p>
</div>
<div class="paragraph">
<p>In addition, <code>Command</code> resources are not restricted to a single controllable property (actuable property in SSN). It is thus possible to create commands that contain several parameters, and processing a command can result in actions on several properties at once (e.g. both orientation and FOV of a camera can be modified with a single 'ptz' command).</p>
</div>
<div class="paragraph">
<p>Below is the contextual class diagram of the <code>Command</code> resource:</p>
</div>
<div id="command-class" class="imageblock text-center">
<div class="content">
<img src="figures/FIG005-command-class.png" alt="api-class-diagram">
</div>
<div class="title">Figure 5. Command Resource Diagram</div>
</div>
<div class="sect3">
<h4 id="_properties_4"><a class="anchor" href="#_properties_4"></a>9.5.1. Properties</h4>
<table id="req_command-props" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 26</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/command/properties</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>Command</code> resource SHALL include all mandatory properties listed in <a href="#command-properties">Table 10</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="command-properties" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Command Properties</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 50%;">
<col style="width: 15%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Data Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>issueTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time the command was received by the system.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>executionTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time period during which the command was executed. The time period ends when the effect of the command has modified all controlled properties of the feature of interest.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeExtent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currentStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current status code of the command (see <a href="#command-status-codes">Table 13</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier of the user who issued the command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parameters</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of the command parameters.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>(*) These properties are mandatory when a command is reported by the server but are not required when creating or updating a command. They should be ignored by the server.</p>
</div>
<table id="req_command-status" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 27</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/command/status</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>Command</code> resource encoding SHALL use one of the case-sensitive codes provided in <a href="#command-status-codes">Table 13</a> as the value of the <code>Status</code> property.<br>
       If using a URI is not practical, the encoding SHALL define a mapping between all possible values used to encode the type and the URIs defined in this table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The value of the <code>currentStatus</code> property SHALL be the same as the status code listed in the latest status report.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_associations_4"><a class="anchor" href="#_associations_4"></a>9.5.2. Associations</h4>
<div class="paragraph">
<p>A <code>Command</code> resource is also required to include the following associations:</p>
</div>
<table id="req_command-links" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 28</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/command/links</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>Command</code> resource SHALL include the associations defined in <a href="#command-links">Table 11</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="command-links" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Command Associations</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Relation Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Target Content</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>control</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>ControlStream</code> that the command is part of.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single <code>ControlStream</code> resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>featureOfInterest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the feature of interest whose properties are changed by this command.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single <code>SamplingFeature</code> resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to status reports related to this command.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of <code>CommandStatus</code> resources.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_command_collections"><a class="anchor" href="#_command_collections"></a>9.6. Command Collections</h3>
<div class="paragraph">
<p>Top level <code>Command</code> resource collections are identified with the item-type <code>'command'</code>.</p>
</div>
<table id="req_command-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 29</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/command/collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose at least one collection containing <code>Command</code> resources.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_command-collection-type" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 30</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/command/collection-type</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL identify all collections containing <code>Command</code> resources by setting the value of the <code>itemType</code> property to <code>'command'</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_command-catchall-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 31</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/command/catchall-collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose a collection containing all available <code>Command</code> resources at URL <code>{api_root}/commands</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition to top-level collections, each control stream exposes its own commands as a sub-collection of the <code>ControlStream</code> resource.</p>
</div>
<table id="req_command-controlstream-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 32</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/command/controlstream-collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose a collection containing all <code>Command</code> resources available from a given <code>ControlStream</code> at URL <code>{controlStreamResourceUrl}/commands</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_command_status_resources"><a class="anchor" href="#_command_status_resources"></a>9.7. Command Status Resources</h3>
<div class="paragraph">
<p><code>CommandStatus</code> resources represent a status report describing the state of a command at a given point in time. Several status reports can be issued for any given command.</p>
</div>
<div class="paragraph">
<p>When commands are processed synchronously, a single status report is provided. But when commands are processed asynchronously, any number of status reports can be provided by the server. They are used to report early acceptance/rejection of the command, scheduling and execution steps as well as failure and cancellations.</p>
</div>
<div class="paragraph">
<p>Below is the contextual class diagram of the <code>CommandStatus</code> resource:</p>
</div>
<div id="commandstatus-class" class="imageblock text-center">
<div class="content">
<img src="figures/FIG006-commandstatus-class.png" alt="api-class-diagram">
</div>
<div class="title">Figure 6. Command Status Resource Diagram</div>
</div>
<div class="sect3">
<h4 id="_properties_5"><a class="anchor" href="#_properties_5"></a>9.7.1. Properties</h4>
<table id="req_commandstatus-props" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 33</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/commandstatus/properties</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>CommandStatus</code> resource SHALL include all mandatory properties listed in <a href="#commandstatus-properties">Table 12</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="commandstatus-properties" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Command Status Properties</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 50%;">
<col style="width: 15%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Data Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reportTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time when the status report was generated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Code describing the state of the command (see <a href="#command-status-codes">Table 13</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>percentCompletion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estimated progress as a percentage of total progress.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>executionTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time period during which the command was executed. The time period ends when the effect of the command has modified all controlled properties of the feature of interest.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeExtent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human readable status message.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
</tbody>
</table>
<table id="req_commandstatus-status" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 34</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/commandstatus/status</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>CommandStatus</code> resource encoding SHALL use one of the case-sensitive codes provided in <a href="#command-status-codes">Table 13</a> as the value of the <code>status</code> property.<br>
       If using a URI is not practical, the encoding SHALL define a mapping between all possible values used to encode the type and the URIs defined in this table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The status codes SHALL be used as specified by the 'Usage' column of <a href="#command-status-codes">Table 13</a>. Other properties SHALL be set as specified in the table.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="command-status-codes" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Command Status Codes</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Code</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PENDING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is pending, meaning it has been received by the system but no decision to accept or reject it has been made.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACCEPTED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command was accepted by the receiving system. This usually means that the command has passed the first validation steps, but it can still be rejected or fail later during execution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">REJECTED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command was rejected by the receiving system. It won&#8217;t be executed at all and the <code>message</code> property provides the reason for the rejection. This is a final state. No further status updates will be sent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCHEDULED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command was validated and effectively scheduled by the receiving system. When this status code is used, the scheduled execution time must be provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UPDATED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An update to the command was received and accepted. This code must be used if the system supports task updates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CANCELED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command was canceled by an authorized user. This code must be used if the system supports user driven task cancellations. The <code>REJECTED</code> state should be used instead if the command was canceled by the receiving system. This is a final state. No further status updates will be sent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXECUTING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command is currently being executed by the receiving system. The status message can provide more information about the current progress. A system can send several status updates with this code but different time stamps to report progress incrementally. In particular, the progress percentage and the end of the (estimated) execution time period can be refined in each update.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COMPLETED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command has completed after a successful execution. The actual execution time must be provided. This is a final state. No further status updates will be sent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAILED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The command has failed during execution. The error and/or status message provides the reason for failure. This is a final state. No further status updates will be sent.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_associations_5"><a class="anchor" href="#_associations_5"></a>9.7.2. Associations</h4>
<div class="paragraph">
<p>A <code>CommandStatus</code> resource is also required to include the following associations:</p>
</div>
<table id="req_commandstatus-links" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 35</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/commandstatus/links</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>CommandStatus</code> resource SHALL include the associations defined in <a href="#commandstatus-links">Table 14</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="commandstatus-links" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Command Status Associations</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Relation Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Target Content</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>command</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>Command</code> that this status report relates to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single <code>Command</code> resource.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clause-system-events"><a class="anchor" href="#clause-system-events"></a>10. Requirements Class "System Events"</h2>
<div class="sectionbody">
<table id="rc_system-events" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/system-events" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/system-events</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-api-common">Requirements Class "Common"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-features" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-features</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/datetime" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/datetime</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/limit" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/limit</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_overview_5"><a class="anchor" href="#_overview_5"></a>10.1. Overview</h3>
<div class="paragraph">
<p><code>SystemEvent</code> resources are used to capture information about various events and maintenance operations occuring on (observing) systems such as recalibrations, part replacements, software updates, relocations/deployments, operator handoffs, decommissioning, etc.</p>
</div>
<div class="paragraph">
<p>This section predefines a certain number of event types but the list can be extended further by extensions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The exact way properties and associations of the resources defined in this section are represented in the payload is defined by each encoding. See section <a href="#clause-encoding-json">Requirements Class "JSON Encoding"</a> for example representations of these resources.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_system_event_resources"><a class="anchor" href="#_system_event_resources"></a>10.2. System Event Resources</h3>
<div class="paragraph">
<p><code>SystemEvent</code> resources are modeled on the SensorML Event class.</p>
</div>
<div class="paragraph">
<p>Below is the contextual class diagram of the <code>SystemEvent</code> resource:</p>
</div>
<div id="system-event-class" class="imageblock text-center">
<div class="content">
<img src="figures/FIG007-systemevent-class.png" alt="api-class-diagram">
</div>
<div class="title">Figure 7. System Event Diagram</div>
</div>
<div class="sect3">
<h4 id="_properties_6"><a class="anchor" href="#_properties_6"></a>10.2.1. Properties</h4>
<table id="req_system-event-props" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 36</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/system-event/properties</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>SystemEvent</code> resource SHALL include all mandatory properties listed in <a href="#system-event-properties">Table 15</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="system-event-properties" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. System Event Properties</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 50%;">
<col style="width: 15%;">
<col style="width: 15%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Data Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the event.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human readable description for the event.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eventTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time the event occured on the system.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeExtent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of event (see <a href="#system-event-types">Table 16</a>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mandatory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human readable message from the operator.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
</tbody>
</table>
<table id="req_system-event-type" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 37</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/system-event/type</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>SystemEvent</code> resource encoding SHALL use one of the URIs provided in <a href="#system-event-types">Table 16</a> as the value of the <code>Type</code> property.
       If using a URI is not practical, the encoding SHALL define a mapping between all possible values used to encode the type and the URIs defined in this table.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="system-event-types" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. System Event Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Type URI</strong></th>
<th class="tableblock halign-left valign-top"><strong>Usage</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/def/x-OGC/TBD/Calibration" class="bare">http://www.opengis.net/def/x-OGC/TBD/Calibration</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System was calibrated or recalibrated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/def/x-OGC/TBD/ParameterChange" class="bare">http://www.opengis.net/def/x-OGC/TBD/ParameterChange</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><mark>TBD</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/def/x-OGC/TBD/SoftwareUpdate" class="bare">http://www.opengis.net/def/x-OGC/TBD/SoftwareUpdate</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><mark>TBD</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/def/x-OGC/TBD/PartReplacement" class="bare">http://www.opengis.net/def/x-OGC/TBD/PartReplacement</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><mark>TBD</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/def/x-OGC/TBD/Relocation" class="bare">http://www.opengis.net/def/x-OGC/TBD/Relocation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><mark>TBD</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/def/x-OGC/TBD/Deployment" class="bare">http://www.opengis.net/def/x-OGC/TBD/Deployment</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><mark>TBD</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/def/x-OGC/TBD/Decommission" class="bare">http://www.opengis.net/def/x-OGC/TBD/Decommission</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><mark>TBD</mark></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_associations_6"><a class="anchor" href="#_associations_6"></a>10.2.2. Associations</h4>
<div class="paragraph">
<p>A <code>SystemEvent</code> resource is also required to include the following associations:</p>
</div>
<table id="req_system-event-links" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 38</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/system-event/links</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <code>SystemEvent</code> resource SHALL include the associations defined in <a href="#system-event-links">Table 17</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="system-event-links" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. System Event Associations</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Relation Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
<th class="tableblock halign-left valign-top"><strong>Target Content</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>system</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the <code>System</code> this event relates to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single <code>System</code> resource.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_system_events_collection"><a class="anchor" href="#_system_events_collection"></a>10.3. System Events Collection</h3>
<div class="paragraph">
<p>System events are made available as a sub-collection of <code>System</code> resources.</p>
</div>
<table id="req_system-events-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 39</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/system/events-collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose <code>System</code> events at URL <code>{systemResourceUrl}/events</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_simple_queries"><a class="anchor" href="#_simple_queries"></a>10.4. Simple Queries</h3>
<div class="paragraph">
<p>System events can be filtered using simple query parameters defined in <a href="https://docs.ogc.org/DRAFTS/20-024.html">OGC API - Common - Part 2</a>.</p>
</div>
<table id="req_filter-event-simplequery" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 40</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/filter/event-simplequery</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL support query parameters <code>datetime</code> and <code>limit</code> on all <code>SystemEvent</code> collections.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_filter-event-time" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 41</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/filter/event-time</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> query parameter is used to filter a collection of <code>SystemEvent</code> resources, the server SHALL use the <code>eventTime</code> property of the resource to determine its temporal extent.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Only resources with an <code>eventTime</code> that intersects the value of the <code>datetime</code> query parameter SHALL be included in the result set.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>See <a href="#clause-advanced-filtering">Requirements Class "Advanced Filtering"</a> for more filtering options.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clause-system-history"><a class="anchor" href="#clause-system-history"></a>11. Requirements Class "System History"</h2>
<div class="sectionbody">
<table id="rc_system-history" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/system-history" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/system-history</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-api-common">Requirements Class "Common"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-features" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-features</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional
 Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-components" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/system-components</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/datetime" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/datetime</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/limit" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-common-2/1.0/rm/limit</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_overview_6"><a class="anchor" href="#_overview_6"></a>11.1. Overview</h3>
<div class="paragraph">
<p>This requirements class specifies how a server can historize <code>System</code> feature descriptions and make the different versions available through the API.</p>
</div>
<div class="paragraph">
<p>The history mechanism allows the server to retain older versions of a system&#8217;s description, valid at different times. This is useful to capture the exact metadata of the system at a given point in time since it can be needed to properly process older observations (e.g. older calibration tables, etc.).</p>
</div>
<div class="paragraph">
<p>Typically, a new entry would be added to the system history whenever a description with a newer valid time is created. History entries are also often correlated with system events. A new history entry is typically created when a system event results in important changes to the system&#8217;s metadata (such as relocation, recalibration, etc. See <a href="#clause-system-events">Requirements Class "System Events"</a>).</p>
</div>
<div class="paragraph">
<p>When history is supported, the <code>datetime</code> query parameter can be used to retrieve a system&#8217;s description at a specific point in time.</p>
</div>
</div>
<div class="sect2">
<h3 id="_system_history_collection"><a class="anchor" href="#_system_history_collection"></a>11.2. System History Collection</h3>
<div class="paragraph">
<p>A system&#8217;s description history is made available as a sub-collection of <code>System</code> resources.</p>
</div>
<table id="req_system-history-collection" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 42</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/system-history/collection</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The server SHALL expose the history of a <code>System</code> at URL <code>{systemResourceUrl}/history</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A 200-response to a request on the <code>history</code> collection URL shall include the list of all different versions of the <code>System</code> feature description.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>All <code>System</code> features in the response SHALL have non-overlapping time periods (as provided by their <code>validTime</code> property).</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_system_temporal_filtering"><a class="anchor" href="#_system_temporal_filtering"></a>11.3. System Temporal Filtering</h3>
<div class="paragraph">
<p>When system history is supported, the <code>datetime</code> query parameter used to filter system collections is used to determine what version of the system description(s) should be returned by the server.</p>
</div>
<table id="req_filter-system-time" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 43</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/filter/system-time</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Condition</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The request is made on a top-level <code>System</code> collection.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> parameter is ommitted, the server SHALL include only the latest* description of each systems in the result set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> parameter is set to a time instant, the server SHALL include only the system descriptions that were valid at the specified date and time.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">D</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> parameter is set to a time period, the server SHALL include only the newest description of each system among all the ones valid during the specified time period.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>The latest description is the one that is currently valid or, if none is currently valid, the last one valid before the current time.</p>
</li>
</ul>
</div>
<table id="req_filter-system-components-time" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 44</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/filter/system-components-time</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Condition</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The request is made on the <code>components</code> sub-collection of a <code>System</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> parameter is ommitted, the server SHALL include only sub-systems that are currently part of the parent system in the result set. The description of each subsystem SHALL be the one that is currently valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> parameter is set to a time instant, the server SHALL include only sub-systems that were part of the parent system at the specified date and time, in the result set. The description of each subsystem SHALL be the one valid at the specified date and time.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">D</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> parameter is set to a time period, the server SHALL include only sub-systems that were part of the parent system at any point during the specified time period. The description of each subsystem SHALL be the newest description valid during the specified time period.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table id="req_filter-system-history-time" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 45</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/filter/system-history-time</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Condition</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The request is made on the <code>history</code> sub-collection of a <code>System</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> parameter is ommitted, the server SHALL include all versions of the system description in the result set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> parameter is set to a time instant, the server SHALL include only the system description that is valid at the specified date and time (there can be only one).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">D</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>When the <code>datetime</code> parameter is set to a time period, the server SHALL include all system descriptions with a <code>validTime</code> period that intersects the specified time period.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clause-resource-events"><a class="anchor" href="#clause-resource-events"></a>12. Requirements Class "Resource Events"</h2>
<div class="sectionbody">
<table id="rc_resource-events" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/resource-events" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/resource-events</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-api-common">Requirements Class "Common"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/common" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/common</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_overview_7"><a class="anchor" href="#_overview_7"></a>12.1. Overview</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clause-advanced-filtering"><a class="anchor" href="#clause-advanced-filtering"></a>13. Requirements Class "Advanced Filtering"</h2>
<div class="sectionbody">
<table id="rc_filter-advanced-filters" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/advanced-filtering" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-1/1.0/req/advanced-filtering</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-api-common">Requirements Class "Common"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional
 Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional
 Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional
 Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-system-events">Requirements Class "System Events"</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_overview_8"><a class="anchor" href="#_overview_8"></a>13.1. Overview</h3>
<div class="paragraph">
<p>This requirements class specifies additional filtering options that may be used to select only a subset of the resources in a collection.</p>
</div>
<div class="paragraph">
<p>All filters defined in this section are implemented using URL query parameters and can be used in addition to the ones defined in other requirements classes.</p>
</div>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clause-resource-crud"><a class="anchor" href="#clause-resource-crud"></a>14. Requirements Class "Create, Replace, Update and Delete"</h2>
<div class="sectionbody">
<table id="rc_resource-crud" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/resource-crud" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/resource-crud</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-api-common">Requirements Class "Common"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-features-4/1.0/req/create-replace-delete" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-features-4/1.0/req/create-replace-delete</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional
 Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-features-4/1.0/req/update" class="bare" target="_blank" rel="noopener">http://www.opengis.net/spec/ogcapi-features-4/1.0/req/update</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_overview_9"><a class="anchor" href="#_overview_9"></a>14.1. Overview</h3>
<div class="paragraph">
<p>This requirements class specifies how instances of the resource types defined in this Standard are created, replaced, udpated and deleted using the API.</p>
</div>
</div>
<div class="sect2">
<h3 id="_batch_mode"><a class="anchor" href="#_batch_mode"></a>14.2. Batch Mode</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements_classes_for_encodings"><a class="anchor" href="#_requirements_classes_for_encodings"></a>15. Requirements Classes for Encodings</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="clause-encoding-json"><a class="anchor" href="#clause-encoding-json"></a>15.1. Requirements Class "JSON Encoding"</h3>
<table id="rc_encoding-json" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/encoding/json" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/encoding/json</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SWECommon-JSON">SWE Common Data Model - JSON Encodings</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-system-events">Requirements Class "System Events"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-resource-events">Requirements Class "Resource Events"</a></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_overview_10"><a class="anchor" href="#_overview_10"></a>15.1.1. Overview</h4>
<div class="paragraph">
<p>This requirements class defines general JSON encodings for all resource types defined in part 2.
This encoding must be supported by all implementations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_media_type"><a class="anchor" href="#_media_type"></a>15.1.2. Media Type</h4>
<div class="paragraph">
<p>The media type to use to advertise support for this encoding is <code>application/json</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_datastream_encoding_rules"><a class="anchor" href="#_datastream_encoding_rules"></a>15.1.3. Datastream Encoding Rules</h4>
<div class="paragraph">
<p>The <code>Datastream</code> resource is encoded as a JSON object. JSON members have the same names as the class properties and associations. Associations are implemented as links.</p>
</div>
<table id="req_json-schema-datastream" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 46</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/encoding/json/datastream-schema</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Condition</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Server implements <a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A 200-response with the media type <code>application/json</code> containing <code>Datastream</code> resources SHALL conform to one of the following schemas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../openapi/schemas/json/datastreamCollection.json">datastreamCollection.json</a> for a collection of datastreams, and</p>
</li>
<li>
<p><a href="../openapi/schemas/json/datastream.json">datastream.json</a> for a single datastream.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div id="example_json_datastream1" class="exampleblock">
<div class="title">Example 3. A Datastream in JSON format</div>
<div class="content">
<div class="paragraph">
<p>This is a simple datastream with a single observed property and a single format.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{
  "id": "958tf25kjm2f6",
  "name": "Outdoor Thermometer 001 - Air Temperature",
  "system@link": {
    "href": "https://api.example.org/systems/123",
    "uid": "urn:x-ogc:systems:001",
    "outputName": "temp"
  },
  "ultimateFeatureOfInterest@link": {
    "href": "https://api.example.org/collections/buildings/items/754",
    "title": "My House"
  },
  "phenomenonTime": [
    "2020-06-29T14:32:00Z",
    "2022-06-29T19:37:00Z"
  ],
  "resultTime": [
    "2020-06-29T14:32:00Z",
    "2012-06-29T19:37:00Z"
  ],
  "observedProperties": [
    {
      "definition": "http://mmisw.org/ont/cf/parameter/air_temperature",
      "label": "Air Temperature"
    }
  ],
  "formats": [
    "application/json"
  ],
  "links": [
    {
      "rel" : "self",
      "href" : "https://api.example.org/datastreams/958tf25kjm2f6",
      "type" : "application/json"
    }, {
      "rel": "observations",
      "href": "https://api.example.org/datastreams/958tf25kjm2f6/observations",
      "type" : "application/json"
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datastream_schema_encoding_rules"><a class="anchor" href="#_datastream_schema_encoding_rules"></a>15.1.4. Datastream Schema Encoding Rules</h4>
<div class="paragraph">
<p>When using the plain <code>application/json</code> media type for retrieving observations, the following schema syntax is used:</p>
</div>
</div>
<div class="sect3">
<h4 id="_observation_encoding_rules"><a class="anchor" href="#_observation_encoding_rules"></a>15.1.5. Observation Encoding Rules</h4>
<table id="req_json-schema-observation" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 47</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/encoding/json/observation-schema</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Condition</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Server implements <a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A 200-response with the media type <code>application/json</code> containing <code>Observation</code> resources SHALL conform to one of the following schemas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../openapi/schemas/json/observationCollection.json">observationCollection.json</a> for a collection of observations, and</p>
</li>
<li>
<p><a href="../openapi/schemas/json/observation.json">observation.json</a> for a single observation.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div id="example_json_obs" class="exampleblock">
<div class="title">Example 4. Observations in JSON format</div>
<div class="content">
<div class="paragraph">
<p>This is a simple observation with a scalar observed property, associated to the datastream of the example above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{
  "id": "1h6pmb3ntfmogfppknk9aefpvs",
  "datastream@id": "958tf25kjm2f6",
  "phenomenonTime": "2021-03-15T04:53:34Z",
  "resultTime": "2021-03-15T04:53:34Z",
  "result": 23.5
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This second observation has a vector result type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{
  "id": "1125alnna75hafppknk9aefpvs",
  "datastream@id": "1vf8i5ois38u8",
  "phenomenonTime": "2021-03-15T04:53:34Z",
  "resultTime": "2021-03-15T04:53:34Z",
  "result": {
    "lat": -86.5861,
    "lon": 34.7304,
    "alt": 183
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_control_stream_encoding_rules"><a class="anchor" href="#_control_stream_encoding_rules"></a>15.1.6. Control Stream Encoding Rules</h4>
<div class="paragraph">
<p>The <code>ControlStream</code> resource is encoded as a JSON object. JSON members have the same names as the class properties and associations. Associations are implemented as links.</p>
</div>
<table id="req_json-schema-controlstream" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 48</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/encoding/json/controlstream-schema</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Condition</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Server implements <a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A 200-response with the media type <code>application/json</code> containing <code>ControlStream</code> resources SHALL conform to one of the following schemas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../openapi/schemas/json/controlStreamCollection.json">controlStreamCollection.json</a> for a collection of control streams, and</p>
</li>
<li>
<p><a href="../openapi/schemas/json/controlStream.json">controlStream.json</a> for a single control stream.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div id="example_json_controlstream1" class="exampleblock">
<div class="title">Example 5. A Control Stream in JSON format</div>
<div class="content">
<div class="paragraph">
<p>This is a simple control stream with a single controllable property and a single format.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{
  "id": "hf62t0dotfd5k",
  "name": "Garage Video Camera 001 - PTZ Control",
  "system@link": {
    "href": "https://api.example.org/systems/4722256",
    "uid": "urn:x-ogc:systems:CAM001",
    "inputName": "ptz"
  },
  "issueTime": [
    "2012-06-29T14:32:34Z",
    "2012-06-29T14:37:34Z"
  ],
  "executionTime": [
    "2012-06-29T14:32:34Z",
    "2012-06-29T14:37:34Z"
  ],
  "controlledProperties": [
    {
      "definition": "http://sensorml.com/ont/swe/property/PanAngle",
      "label": "Pan Angle"
    },
    {
      "definition": "http://sensorml.com/ont/swe/property/TiltAngle",
      "label": "Tilt Angle"
    },
    {
      "definition": "http://sensorml.com/ont/swe/property/ZoomFactor",
      "label": "Zoom Factor"
    }
  ],
  "formats": [
    "application/json"
  ],
  "links": [
    {
      "rel": "commands",
      "href": "https://api.example.org/controls/hf62t0dotfd5k/commands"
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_encoding_rules"><a class="anchor" href="#_command_encoding_rules"></a>15.1.7. Command Encoding Rules</h4>
<table id="req_json-schema-command" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 49</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/encoding/json/command-schema</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Condition</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Server implements <a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A 200-response with the media type <code>application/json</code> containing <code>Command</code> resources SHALL conform to one of the following schemas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../openapi/schemas/json/commandCollection.json">commandCollection.json</a> for a collection of commands, and</p>
</li>
<li>
<p><a href="../openapi/schemas/json/command.json">command.json</a> for a single command.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div id="example_json_command" class="exampleblock">
<div class="title">Example 6. Command in JSON format</div>
<div class="content">
<div class="paragraph">
<p>This is an example command used to task a PTZ camera, encoded in JSON format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{
  "id": "1125alnna75hafppknk9aefpvs",
  "control@id": "hf62t0dotfd5k",
  "userId": "user01",
  "issueTime": "2021-03-15T04:53:34.248Z",
  "executionTime": [
    "2021-03-15T04:53:34.543Z",
    "2021-03-15T04:53:36.021Z"
  ],
  "currentStatus": "COMPLETED",
  "params": {
    "pan": -10.0,
    "tilt": 23.0,
    "zoom": 0.4
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_status_encoding_rules"><a class="anchor" href="#_command_status_encoding_rules"></a>15.1.8. Command Status Encoding Rules</h4>
<table id="req_json-schema-command-status" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"><strong>Requirement 50</strong></th>
<th class="tableblock halign-left valign-top"><strong>/req/encoding/json/command-status-schema</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Condition</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Server implements <a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A 200-response with the media type <code>application/json</code> containing <code>CommandStatus</code> resources SHALL conform to one of the following schemas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../openapi/schemas/json/commandStatusCollection.json">commandStatusCollection.json</a> for a collection of command status reports, and</p>
</li>
<li>
<p><a href="../openapi/schemas/json/commandStatus.json">commandStatus.json</a> for a single command status report.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div id="example_json_command_status" class="exampleblock">
<div class="title">Example 7. Command status in JSON format</div>
<div class="content">
<div class="paragraph">
<p>These are example command status reports, encoded in JSON format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{
  "id": "rlg2905142qs5uvish4vktotffds2iss8aa0a00",
  "command@id": "1125alnna75hafppknk9aefpvs",
  "reportTime": "2021-03-15T04:53:34.348Z",
  "status": "ACCEPTED"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-JSON hljs" data-lang="JSON">{
  "id": "155rufq7aplr8id10839fc8d6u0ulqfu1bjfumo",
  "command@id": "1125alnna75hafppknk9aefpvs",
  "reportTime": "2021-03-15T04:53:36.021Z",
  "status": "COMPLETED",
  "message": "Camera moved to new position"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resource_event_encoding_rules"><a class="anchor" href="#_resource_event_encoding_rules"></a>15.1.9. Resource Event Encoding Rules</h4>

</div>
<div class="sect3">
<h4 id="_system_event_encoding_rules"><a class="anchor" href="#_system_event_encoding_rules"></a>15.1.10. System Event Encoding Rules</h4>

</div>
</div>
<div class="sect2">
<h3 id="clause-encoding-swejson"><a class="anchor" href="#clause-encoding-swejson"></a>15.2. Requirements Class "SWE Common JSON Encoding"</h3>
<table id="rc_encoding-swecommon-json" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/encoding/swecommon-json" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/encoding/swecommon-json</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SWECommon-JSON">SWE Common Data Model - JSON Encodings</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_overview_11"><a class="anchor" href="#_overview_11"></a>15.2.1. Overview</h4>
<div class="paragraph">
<p>This requirements class defines JSON encodings of <code>Observation</code> and <code>Command</code> resources based on <a href="#SWECommon-JSON">SWE Common Data Model - JSON Encodings</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_media_type_2"><a class="anchor" href="#_media_type_2"></a>15.2.2. Media Type</h4>
<div class="paragraph">
<p>The media type to use to advertise support for this encoding is <code>application/swe+json</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="clause-encoding-swetext"><a class="anchor" href="#clause-encoding-swetext"></a>15.3. Requirements Class "SWE Common Text Encoding"</h3>
<table id="rc_encoding-swecommon-text" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/encoding/swecommon-text" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/encoding/swecommon-text</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SWECommon">SWE Common Data Model</a>, Clause 8.5: Requirements Class: Simple Encodings Schema</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SWECommon">SWE Common Data Model</a>, Clause 9.2: Requirements Class: Text Encoding Rules</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_overview_12"><a class="anchor" href="#_overview_12"></a>15.3.1. Overview</h4>
<div class="paragraph">
<p>This requirements class defines JSON encodings of <code>Observation</code> and <code>Command</code> resources based on the Text Encoding defined in the <a href="#SWECommon">SWE Common Data Model</a> Standard.</p>
</div>
</div>
<div class="sect3">
<h4 id="_media_type_3"><a class="anchor" href="#_media_type_3"></a>15.3.2. Media Type</h4>
<div class="paragraph">
<p>The media type to use to advertise support for this encoding is <code>application/swe+csv</code>.</p>
</div>
<div class="paragraph">
<p>Optionally the media type <code>text/plain</code> can be allowed by a server to retrieve content in this format.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="clause-encoding-swebinary"><a class="anchor" href="#clause-encoding-swebinary"></a>15.4. Requirements Class "SWE Common Binary Encoding"</h3>
<table id="rc_encoding-swecommon-binary" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/encoding/swecommon-binary" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/encoding/swecommon-binary</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SWECommon">SWE Common Data Model</a>, Clause 7.7: Requirements Class: Advanced Encodings Package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SWECommon">SWE Common Data Model</a>, Clause 9.4: Requirements Class: Binary Encoding Rules</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_overview_13"><a class="anchor" href="#_overview_13"></a>15.4.1. Overview</h4>
<div class="paragraph">
<p>This requirements class defines JSON encodings of <code>Observation</code> and <code>Command</code> resources based on the Binary Encoding defined in the <a href="#SWECommon">SWE Common Data Model</a> Standard.</p>
</div>
<div class="paragraph">
<p>The main objective of this encoding is better data size efficiency than text or JSON, thus allowing for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>transfer of observations and commands over very low power / low bandwidth network links (e.g. LoRa,  etc.)</p>
</li>
<li>
<p>transfer high bandwidth data sets such as raster data (e.g. video, LiDAR, etc.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For even better efficiency, this encoding can be combined with a transport protocol such as <a href="#clause-protocol-mqtt">MQTT</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_media_type_4"><a class="anchor" href="#_media_type_4"></a>15.4.2. Media Type</h4>
<div class="paragraph">
<p>The media type to use to advertise support for this encoding is <code>application/swe+binary</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_encoding_rules"><a class="anchor" href="#_encoding_rules"></a>15.4.3. Encoding Rules</h4>
<div class="paragraph">
<p><mark>TODO: URI for phenomenonTime, resultTime, samplingFeatureID, obs result, obs parameters, etc.</mark></p>
</div>
</div>
<div class="sect3">
<h4 id="_datastream_schema"><a class="anchor" href="#_datastream_schema"></a>15.4.4. Datastream Schema</h4>
<div class="paragraph">
<p>When using this encoding, the observation schema provided under the Datastream resource</p>
</div>
</div>
<div class="sect3">
<h4 id="_control_channel_schema"><a class="anchor" href="#_control_channel_schema"></a>15.4.5. Control Channel Schema</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements_classes_for_transport_protocols"><a class="anchor" href="#_requirements_classes_for_transport_protocols"></a>16. Requirements Classes for Transport Protocols</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="clause-protocol-websocket"><a class="anchor" href="#clause-protocol-websocket"></a>16.1. Requirements Class "Websocket Transport"</h3>
<table id="rc_protocol-websocket" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/protocol/websocket" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/protocol/websocket</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Websocket">Websocket Protocol</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-system-events">Requirements Class "System Events"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-resource-events">Requirements Class "Resource Events"</a></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_overview_14"><a class="anchor" href="#_overview_14"></a>16.1.1. Overview</h4>
<div class="paragraph">
<p>This requirements class defines how the Websocket protocol can be used to interact with certain resource types.</p>
</div>
<div class="paragraph">
<p>Websocket can be used for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Streaming real-time observations from the server to the client</p>
</li>
<li>
<p>Streaming real-time observations from the client to the server (ingestion)</p>
</li>
<li>
<p>Streaming real-time commands from the client to the server</p>
</li>
<li>
<p>Streaming real-time commands from the server to the client (command dispatch)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="clause-protocol-mqtt"><a class="anchor" href="#clause-protocol-mqtt"></a>16.2. Requirements Class "MQTT Transport"</h3>
<table id="rc_protocol-mqtt" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><strong>Requirements Class</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><a href="http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/protocol/mqtt" class="bare">http://www.opengis.net/spec/ogcapi-connectedsystems-2/1.0/req/protocol/mqtt</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#MQTT">MQTT Protocol v5.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-datastream-resources">Requirements Class "Datastreams &amp; Observations"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-control-resources">Requirements Class "Control Streams &amp; Commands"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-system-events">Requirements Class "System Events"</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditional Dependency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#clause-resource-events">Requirements Class "Resource Events"</a></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_overview_15"><a class="anchor" href="#_overview_15"></a>16.2.1. Overview</h4>
<div class="paragraph">
<p>This requirements class defines how the MQTT protocol can be used to interact with certain resource types.</p>
</div>
<div class="paragraph">
<p>MQTT can be used to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Subscribe to resource events</p>
</li>
<li>
<p>Subscribe to system events</p>
</li>
<li>
<p>Subscribe to real-time observations</p>
</li>
<li>
<p>Publish observations</p>
</li>
<li>
<p>Subscribe to real-time commands</p>
</li>
<li>
<p>Publish commands</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements_detail"><a class="anchor" href="#_requirements_detail"></a>Annex A: Requirements Detail</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Ensure that there is a conformance class for each requirements class and a test for each requirement (identified by requirement name and number)
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_conformance_class_a"><a class="anchor" href="#_conformance_class_a"></a>A.1. Conformance Class A</h3>
<div class="sect3">
<h4 id="_requirement_1"><a class="anchor" href="#_requirement_1"></a>A.1.1. Requirement 1</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-right valign-top"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">/conf/conf-class-a/req-name-1</p></td>
</tr>
<tr>
<th class="tableblock halign-right valign-top"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">/req/req-class-a/req-name-1</p></td>
</tr>
<tr>
<th class="tableblock halign-right valign-top"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify that&#8230;&#8203;</p></td>
</tr>
<tr>
<th class="tableblock halign-right valign-top"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inspect&#8230;&#8203;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_requirement_2"><a class="anchor" href="#_requirement_2"></a>A.1.2. Requirement 2</h4>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_abstract_test_suite_normative"><a class="anchor" href="#_abstract_test_suite_normative"></a>Annex B: Abstract Test Suite (Normative)</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_examples_informative"><a class="anchor" href="#_examples_informative"></a>Annex C: Examples (Informative)</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_relationship_with_other_ogciso_standards_informative"><a class="anchor" href="#_relationship_with_other_ogciso_standards_informative"></a>Annex D: Relationship with other OGC/ISO standards (Informative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_semantic_sensor_network_ontology"><a class="anchor" href="#_semantic_sensor_network_ontology"></a>D.1. Semantic Sensor Network Ontology</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
</div>
<div class="sect2">
<h3 id="_sensor_modeling_language"><a class="anchor" href="#_sensor_modeling_language"></a>D.2. Sensor Modeling Language</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
</div>
<div class="sect2">
<h3 id="_observations_measurements"><a class="anchor" href="#_observations_measurements"></a>D.3. Observations &amp; Measurements</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
<div class="paragraph">
<p>+ OMS</p>
</div>
</div>
<div class="sect2">
<h3 id="_coverages"><a class="anchor" href="#_coverages"></a>D.4. Coverages</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
</div>
<div class="sect2">
<h3 id="_ogc_api_features"><a class="anchor" href="#_ogc_api_features"></a>D.5. OGC API - Features</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
</div>
<div class="sect2">
<h3 id="_sensorthings_api"><a class="anchor" href="#_sensorthings_api"></a>D.6. SensorThings API</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
<div class="paragraph">
<p>What makes it different from STA</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fully based on OGC API and API Features</p>
</li>
<li>
<p>Integrated with other OGC APIs via links (Features, MovingFeatures, GeoVolumes, 3D Tiles, Coverages, EDR, STA)</p>
</li>
<li>
<p>Resource model based on SensorML and O&amp;M ; SOSA/SSN used for semantic tagging</p>
</li>
<li>
<p>Supports more complex observation and task types</p>
</li>
<li>
<p>Query model decorrelated from resource encoding</p>
</li>
<li>
<p>Able to support multiple formats (not only a single JSON model)
&#8658; intend to bring in protobuf encoding for SWE Common</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_other_ogc_apis"><a class="anchor" href="#_other_ogc_apis"></a>D.7. Other OGC APIs</h3>
<div class="paragraph">
<p><mark>TODO</mark></p>
</div>
<div class="paragraph">
<p>This API is designed to be used in conjunction with other Web APIs with a particular focus on OGC APIs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>system &#8594; link to STA Thing or STA Sensor/Actuator</p>
</li>
<li>
<p>datastream &#8594; link to STA Datastream</p>
</li>
<li>
<p>control &#8594; link to STA TaskingCapability</p>
</li>
<li>
<p>observation result &#8594; link to a Coverages API (large imagery, data cube)</p>
</li>
<li>
<p>domain feature &#8594; link to Features API, GeoVolumes, 3D tiles</p>
</li>
<li>
<p>system/process &#8594; link to Processes API
&lt;&lt;&lt;</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history"><a class="anchor" href="#_revision_history"></a>Annex E: Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Release</th>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Primary clauses modified</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2023-01-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alex Robin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">first draft version</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="Bibliography"><a class="anchor" href="#Bibliography"></a>Annex F: Bibliography</h2>
<div class="sectionbody">
<div id="OGC-SOS" class="paragraph">
<p>[1] Open Geospatial Consortium (OGC): <strong>OGC 12-006: OGC Sensor Observation Service Interface Standard, Version 2.0</strong>. Available at <a href="https://www.ogc.org/standards/sos" class="bare">https://www.ogc.org/standards/sos</a></p>
</div>
<div id="OGC-SPS" class="paragraph">
<p>[2] Open Geospatial Consortium (OGC): <strong>OGC 19-000: OGC Sensor Planning Service Implementation Standard, Version 2.0</strong>. Available at <a href="https://www.ogc.org/standards/sps" class="bare">https://www.ogc.org/standards/sps</a></p>
</div>
<div id="OGC-STA-1" class="paragraph">
<p>[3] Open Geospatial Consortium (OGC): <strong>OGC 18-088: SensorThings API Part 1: Sensing, Version 1.1</strong> [online]. Available at <a href="https://docs.ogc.org/is/18-088/18-088.html" class="bare">https://docs.ogc.org/is/18-088/18-088.html</a></p>
</div>
<div id="OGC-STA-2" class="paragraph">
<p>[4] Open Geospatial Consortium (OGC): <strong>OGC 17-079r1: SensorThings API Part 2: Tasking Core, Version 1.0</strong> [online]. Available at <a href="http://docs.opengeospatial.org/is/17-079r1/17-079r1.html" class="bare">http://docs.opengeospatial.org/is/17-079r1/17-079r1.html</a></p>
</div>
<div id="OGC-W3C-SSN-EXT" class="paragraph">
<p>[5] OGC/W3C: <strong>Extensions to the Semantic Sensor Network Ontology, Working Draft 16 January 2020</strong> [online]. Available at <a href="https://www.w3.org/TR/vocab-ssn-ext" class="bare">https://www.w3.org/TR/vocab-ssn-ext</a></p>
</div>
<div id="ISO-OMS-3" class="paragraph">
<p>[6] International Organization for Standardization (ISO): <strong>ISO/DIS 19156:2022 Geographic information - Observations, measurements
and samples (OMS)</strong></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-01-10 00:37:18 +0100
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>