{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "A Pose object based on the GeoPose standard.",
  "allOf": [
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "Pose"
        },
        "localFrame": {
          "type": "string",
          "format": "uri"
        },
        "referenceFrame": {
          "type": "string",
          "format": "uri"
        },
        "ltpReferenceFrame": {
          "description": "Local tangent plane topocentric reference frame (LTP), e.g. ENU, NED",
          "type": "string",
          "format": "uri"
        },
        "position": {
          "oneOf": [
            { "$ref": "#/definitions/PositionGeo" },
            { "$ref": "#/definitions/PositionXYZ" }
          ]
        },
        "angles": {
          "$ref": "#/definitions/AnglesYPR"
        },
        "quaternion": {
          "$ref": "#/definitions/Quaternion"
        }
      }
    },
    {
      "anyOf": [
        { "required": ["referenceFrame"] },
        { "required": ["ltpReferenceFrame"] }
      ]
    },
    {
      "anyOf": [
        { "required": ["position"] },
        { "required": ["angles"] },
        { "required": ["quaternion"] },
        { "required": ["position", "angles"] },
        { "required": ["position", "quaternion"] }
      ]
    },
    {
      "anyOf": [
        {
          "properties": {
            "referenceFrame": {
              "const": "http://www.opengis.net/def/crs/EPSG/0/4979"
            },
            "position": {
              "$ref": "#/definitions/PositionGeo"
            }
          }
        },
        {
          "properties": {
            "position": {
              "$ref": "#/definitions/PositionXYZ"
            }
          }
        }
      ]
    }
  ],
  "definitions": {
    "PositionGeo": {
      "properties": {
        "lat": {
          "type": "number"
        },
        "lon": {
          "type": "number"
        },
        "h": {
          "type": "number"
        }
      },
      "required": ["lat","lon","h"]
    },
    "PositionXYZ": {
      "properties": {
        "referenceFrame": {
          "type": "string",
          "format": "uri"
        },
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "z": {
          "type": "number"
        }
      },
      "required": ["x","y","z"]
    },
    "AnglesYPR": {
      "properties": {
        "referenceFrame": {
          "type": "string",
          "format": "uri"
        },
        "yaw": {
          "type": "number"
        },
        "pitch": {
          "type": "number"
        },
        "roll": {
          "type": "number"
        }
      },
      "required": ["yaw","pitch","roll"]
    },
    "Quaternion": {
      "properties": {
        "referenceFrame": {
          "type": "string",
          "format": "uri"
        },
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        },
        "z": {
          "type": "number"
        },
        "w": {
          "type": "number"
        }
      },
      "required": ["x","y","z","w"]
    }
  }
}